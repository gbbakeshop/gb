import{r as d,u as T,q as _,h as r,j as m,a as o,c as f}from"./app-82567c3a.js";import{u as j}from"./useDispatch-be7aef64.js";async function C(e){return(await axios.post("/api/get_domination",e)).data}async function H(e){return(await axios.post("/api/create_domination",e)).data}function I({branchid:e,position:l,userid:h}){const p=j(),[k,a]=d.useState(!1),[x,i]=d.useState(!0),{date:g}=T(t=>t.branchExpenses),{url:w}=_(),y=w.split("/")[2],[u,n]=d.useState([{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}]),N=[{sign:"₱",bills:1e3,pcs:0,total:0},{sign:"₱",bills:500,pcs:0,total:0},{sign:"₱",bills:200,pcs:0,total:0},{sign:"₱",bills:100,pcs:0,total:0},{sign:"₱",bills:50,pcs:0,total:0},{sign:"₱",bills:20,pcs:0,total:0},{sign:"₱",bills:10,pcs:0,total:0},{sign:"₱",bills:5,pcs:0,total:0},{sign:"₱",bills:1,pcs:0,total:0},{sign:"¢",bills:0,pcs:0,total:0}],v=(t,s,b)=>{console.log("value",s),n(E=>{const c=[...E];return c[t]={...c[t],id:b,pcs:s,total:s*c[t].bills},c})},A=u.reduce((t,s)=>t+s.total,0);function S(){return{status:"loading",message:"Loading..."}}d.useEffect(()=>{C({branchid:e??y,date:g,userid:h,meridiem:r().format("A")}).then(t=>{r(g).format("L")<r().format("L")?(n(t.status),i(!0),a(!1)):t.status.length!==0?(i(!0),n(t.status),a(!1)):(n(N),i(!1),a(!1))}).catch(t=>{a(!1)})},[g]);function D(){a(!0),p(f(S())),H({branchid:e??y,domination:u,date:r().format("L"),meridiem:r().format("A"),userid:h}).then(t=>{i(!0),a(!1),p(f(t))}).catch(t=>{i(!1),a(!1),p(f(res))})}const L=[...u].sort((t,s)=>s.bills-t.bills);return m("div",{className:"relative overflow-x-auto",children:["TOTAL ACTUAL CASH ON HAND: ₱ ",A,o("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:o("tbody",{children:L.map((t,s)=>m("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[m("th",{scope:"row",className:"px-6 py-2 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:[t.sign," ",t.bills]}),o("td",{className:"px-6 py-2",children:l!="supervisor"&&x&&l!="admin"?t.pcs:o("input",{type:"number",onInput:b=>v(s,b.target.value,t.id),value:t.pcs,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-red-500 focus:border-red-500 block w-full p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-red-500 dark:focus:border-red-500"})}),o("td",{className:"px-6 py-2",children:t.total})]},s))})}),l=="supervisor"||l=="admin"||!x?o("button",{disabled:k,onClick:D,class:"mt-5 w-full bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 border border-red-700 rounded",children:"Save"}):null]})}export{I as default};
